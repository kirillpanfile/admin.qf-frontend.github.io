{"version":3,"file":"js/AdminUsers.b8b32a52.js","mappings":"ixFAwJA,MAAM,UAAEA,EAAF,WAAaC,EAAb,SAAyBC,EAAzB,SAAmCC,EAAnC,QAA6CC,EAA7C,eAAsDC,EAAtD,WAAsEC,IAAeC,EAAAA,EAAAA,OACrF,MAAEC,EAAF,MAASC,EAAT,YAAgBC,EAAhB,cAA6BC,IAAkBC,EAAAA,EAAAA,KAAKL,EAAAA,EAAAA,OACpDM,GAASC,EAAAA,EAAAA,IAAI,IAEbC,GAAYC,EAAAA,EAAAA,IAAO,iBACnBC,GAAcD,EAAAA,EAAAA,IAAO,iBAErBE,EAAkB,IAAMD,EAAY,UAEpCE,EAAiBC,IACnBL,EAAU,OAAQK,IAGhBC,EAAc,CAChB,CACIC,KAAM,OACNC,KAAM,UAEV,CACID,KAAM,QACNC,KAAM,kBAIdC,EAAAA,EAAAA,KAAU,KACgB,GAAtBhB,EAAMiB,MAAMC,QAAe1B,OAK/B,IAAI2B,EAAU,MAEdC,EAAAA,EAAAA,IAAMf,GAASY,IACXI,aAAaF,GACbA,EAAUG,YAAW,KACjBxB,EAAWmB,KACZ,QASP,MAAMM,GAAc,CAACC,EAAMC,IAAO,IAAIC,MAAMD,EAAKD,EAAO,GAAGG,QAAQC,KAAKC,GAAMA,EAAIL,IAE5EM,GAAc,KAChBzB,EAAOY,MAAQ,GACfnB,EAAW,KAKTiC,IAAcC,EAAAA,EAAAA,KAAS,IACrB9B,EAAYe,MAAQ,GAAKf,EAAYe,MAAQhB,EAAMgB,MAAQ,EACpDM,GAAYrB,EAAYe,MAAQ,EAAGf,EAAYe,MAAQ,GACzC,GAArBf,EAAYe,MAAmBM,GAAY,EAAG,GAC9CrB,EAAYe,OAAShB,EAAMgB,MAAQ,EAAUM,GAAYtB,EAAMgB,MAAQ,EAAGhB,EAAMgB,YAApF,I,OAMJG,EAAAA,EAAAA,IAAMf,GAAS4B,GAAuB,IAAfA,EAAIf,QAAgB1B,M,k/FCnNrC0C,EAAc,EAEpB","sources":["webpack://qf-frontend/./src/views/Admin/AdminUsers.vue","webpack://qf-frontend/./src/views/Admin/AdminUsers.vue?b2ff"],"sourcesContent":["<template>\r\n    <main class=\"pt-6 px-4\">\r\n        <div\r\n            class=\"bg-gray-50 dark:bg-gray-900 block sm:flex items-center justify-between border-b dark:border-slate-600 border-gray-200\">\r\n            <div class=\"mb-1 w-full\">\r\n                <VBreadcrumb :routes=\"breadcrumbs\" />\r\n                <div class=\"mb-6\">\r\n                    <h1 class=\"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-gray-300\">Users</h1>\r\n                </div>\r\n                <div class=\"sm:flex\">\r\n                    <div\r\n                        class=\"hidden sm:flex items-center sm:divide-x sm:divide-gray-100 dark:sm:divide-gray-600 mb-3 sm:mb-4\">\r\n                        <form class=\"lg:pr-3\" action=\"#\" method=\"GET\">\r\n                            <label for=\"users-search\" class=\"sr-only\">Search</label>\r\n                            <div class=\"mt-1 relative lg:w-64 xl:w-96\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    name=\"email\"\r\n                                    id=\"users-search\"\r\n                                    class=\"bg-gray-50 dark:bg-slate-700 border dark:text-gray-200 border-gray-300 dark:border-slate-600 text-gray-900 outline-none sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 block w-full p-2.5\"\r\n                                    placeholder=\"Search for users\"\r\n                                    v-model=\"search\" />\r\n                            </div>\r\n                        </form>\r\n                        <div class=\"flex space-x-1 pl-0 sm:pl-2 mt-3 sm:mt-0\">\r\n                            <v-button type=\"button\" size=\"xs\" bgColor=\"no-color\" @click=\"clearSearch()\"\r\n                                ><i class=\"fa-solid fa-trash-can text-lg dark:text-gray-400\"></i\r\n                            ></v-button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex items-center space-x-2 sm:space-x-3 ml-auto\">\r\n                        <div\r\n                            v-if=\"selectedUsers.length != 0\"\r\n                            class=\"select-none py-2 px-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600\">\r\n                            Selected: {{ selectedUsers.length }}\r\n                        </div>\r\n                        <v-button\r\n                            type=\"button\"\r\n                            size=\"sm\"\r\n                            bgColor=\"red\"\r\n                            v-if=\"selectedUsers.length != 0\"\r\n                            @click=\"deleteMultiple\">\r\n                            <i class=\"fa-solid fa-trash-can\"></i>\r\n                        </v-button>\r\n                        <v-button type=\"button\" size=\"sm\" bgColor=\"alternative\" @click=\"openCreateModal()\">\r\n                            <i class=\"fa-solid fa-plus mr-2\"></i>Add User\r\n                        </v-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"w-full overflow-hidden shadow-xs dark:bg-slate-900 bg-white\">\r\n            <div class=\"w-full overflow-x-auto\">\r\n                <div class=\"w-full whitespace-nowrap\">\r\n                    <ul class=\"bg-white text-gray-200 dark:bg-gray-900 divide-y w-full\">\r\n                        <li class=\"bg-gray-100 dark:bg-gray-800\">\r\n                            <div class=\"py-4 grid grid-cols-12 gap-2\">\r\n                                <div class=\"px-4 flex col-span-7 lg:col-span-4 xl:col-span-3\">\r\n                                    <h1 class=\"text-base font-bold text-gray-700 dark:text-gray-400\">User</h1>\r\n                                </div>\r\n                                <div class=\"px-4 hidden lg:block lg:col-span-4 xl:col-span-3\">\r\n                                    <h1 class=\"text-base font-bold text-gray-700 dark:text-gray-400\">User Id</h1>\r\n                                </div>\r\n                                <div class=\"col-span-3 hidden xl:block px-4\">\r\n                                    <h1 class=\"text-base font-bold text-gray-700 dark:text-gray-400\">User Roles</h1>\r\n                                </div>\r\n                                <div class=\"col-span-5 md:col-span-3 lg:col-span-4 xl:col-span-3 px-4 flex gap-4\">\r\n                                    <h1 class=\"text-base font-bold text-gray-700 dark:text-gray-400\">Actions</h1>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                        <sequential-entrance class=\"divide-y dark:border-slate-600\" delay=\"50\">\r\n                            <v-list-item\r\n                                v-for=\"(item, index) in users\"\r\n                                v-wave\r\n                                :key=\"item._id\"\r\n                                v-memo=\"users\"\r\n                                :picture=\"item.picture\"\r\n                                :name=\"item.username\"\r\n                                :email=\"item.email\"\r\n                                :id=\"item._id\"\r\n                                :userRoles=\"item.roles\"\r\n                                type=\"usersLarge\"\r\n                                @edit=\"openUserModal(item)\"\r\n                                @click=\"selectUser(item._id)\">\r\n                            </v-list-item>\r\n                        </sequential-entrance>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div\r\n            class=\"grid px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 dark:text-gray-400 uppercase border-t dark:border-slate-600 bg-gray-50 dark:bg-gray-800 sm:grid-cols-9\">\r\n            <span class=\"flex items-center col-span-3\"> Showing page {{ currentPage }} of {{ pages }} </span>\r\n            <span class=\"col-span-2\"></span>\r\n            <!-- Pagination -->\r\n            <span class=\"flex col-span-4 mt-2 sm:mt-auto sm:justify-end\">\r\n                <nav>\r\n                    <ul class=\"inline-flex items-center\">\r\n                        <li>\r\n                            <button\r\n                                v-wave\r\n                                @click=\"prevPage\"\r\n                                class=\"px-3 py-1 rounded-md rounded-l-lg focus:outline-none\">\r\n                                <i class=\"fa-solid fa-chevron-left\"></i>\r\n                            </button>\r\n                        </li>\r\n\r\n                        <button\r\n                            class=\"px-3 py-1 rounded-md focus:outline-none\"\r\n                            v-if=\"currentPage > 2\"\r\n                            @click=\"setPage(1)\">\r\n                            1\r\n                        </button>\r\n                        <button\r\n                            class=\"px-3 py-1 rounded-md focus:outline-none\"\r\n                            :class=\"{\r\n                                'btn-pagination-active': currentPage == item,\r\n                            }\"\r\n                            v-for=\"(item, index) in pagesToShow\"\r\n                            :key=\"index\"\r\n                            @click=\"setPage(item)\">\r\n                            {{ item }}\r\n                        </button>\r\n                        <button\r\n                            class=\"px-3 py-1 rounded-md focus:outline-none\"\r\n                            v-if=\"currentPage + 2 < pages\"\r\n                            @click=\"setPage(pages)\">\r\n                            {{ pages }}\r\n                        </button>\r\n\r\n                        <li>\r\n                            <button\r\n                                v-wave\r\n                                @click=\"nextPage\"\r\n                                class=\"px-3 py-1 rounded-md rounded-r-lg focus:outline-none\">\r\n                                <i class=\"fa-solid fa-chevron-right\"></i>\r\n                            </button>\r\n                        </li>\r\n                    </ul>\r\n                </nav>\r\n            </span>\r\n        </div>\r\n    </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { VListItem, VButton, VBreadcrumb } from \"@/components\"\r\nimport { onMounted, computed, ref, watch, inject } from \"vue\"\r\nimport { useAdminStore, refs } from \"@/store\"\r\n\r\nconst { loadUsers, selectUser, nextPage, prevPage, setPage, deleteMultiple, searchUser } = useAdminStore()\r\nconst { users, pages, currentPage, selectedUsers } = refs(useAdminStore())\r\nconst search = ref(\"\")\r\n\r\nconst userModal = inject(\"openUserModal\")\r\nconst createModal = inject(\"openUserModal\")\r\n\r\nconst openCreateModal = () => createModal(\"create\")\r\n\r\nconst openUserModal = (user) => {\r\n    userModal(\"view\", user)\r\n}\r\n\r\nconst breadcrumbs = [\r\n    {\r\n        name: \"Home\",\r\n        link: \"/admin\",\r\n    },\r\n    {\r\n        name: \"Users\",\r\n        link: \"/admin/users\",\r\n    },\r\n]\r\n\r\nonMounted(() => {\r\n    users.value.length == 0 && loadUsers()\r\n})\r\n\r\n//set timeou on search\r\n\r\nlet timeout = null\r\n\r\nwatch(search, (value) => {\r\n    clearTimeout(timeout)\r\n    timeout = setTimeout(() => {\r\n        searchUser(value)\r\n    }, 700)\r\n})\r\n\r\n/**\r\n * @description Create an array of pages to show in the pagination\r\n * @param {number} from  - start index\r\n * @param {number} to   - end index\r\n */\r\n\r\nconst createPages = (from, to) => [...Array(to - from + 1).keys()].map((i) => i + from)\r\n\r\nconst clearSearch = () => {\r\n    search.value = \"\"\r\n    searchUser(\"\")\r\n}\r\n/**\r\n * @description Pages to show in the pagination depending on the current page\r\n */\r\nconst pagesToShow = computed(() => {\r\n    if (currentPage.value > 1 && currentPage.value < pages.value - 2)\r\n        return createPages(currentPage.value - 1, currentPage.value + 2)\r\n    if (currentPage.value == 1) return createPages(1, 4)\r\n    if (currentPage.value >= pages.value - 2) return createPages(pages.value - 3, pages.value)\r\n})\r\n\r\n/**\r\n * @description Search for a user\r\n */\r\nwatch(search, (val) => val.length === 0 && loadUsers())\r\n</script>\r\n\r\n<style>\r\n.btn-pagination-active {\r\n    background-color: #00bcd4;\r\n    color: #fff;\r\n}\r\n</style>\r\n","import script from \"./AdminUsers.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AdminUsers.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AdminUsers.vue?vue&type=style&index=0&id=4cf6789b&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["loadUsers","selectUser","nextPage","prevPage","setPage","deleteMultiple","searchUser","useAdminStore","users","pages","currentPage","selectedUsers","refs","search","ref","userModal","inject","createModal","openCreateModal","openUserModal","user","breadcrumbs","name","link","onMounted","value","length","timeout","watch","clearTimeout","setTimeout","createPages","from","to","Array","keys","map","i","clearSearch","pagesToShow","computed","val","__exports__"],"sourceRoot":""}